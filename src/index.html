<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <link rel="stylesheet" href="./css/index.css">
  <link rel="stylesheet" href="./css/editable-span.css">
  <link rel="stylesheet" href="css/signUp.css">
  <link rel="stylesheet" href="css/signIn.css">
  <link rel="stylesheet" href="css/share.css">
  <link rel="stylesheet" href="css/skinPicker.css">
  <link rel="stylesheet" href="css/print.css" media="print">
</head>
<body>
<div class="page" id="app">
  <aside v-show="!isShareMode" v-cloak>
    <div class="upper">
      <button @click="onSave">保存</button>
      <button @click="shareVisible=true">分享</button>
      <button @click="print">打印</button>
      <button @click="skinPickerVisible=true">换肤</button>
    </div>
    <div class="down">
      <button @click="onSignOut" v-show="AV.User.current()" v-cloak>登出</button>
    </div>
  </aside>
  <main>
    <div class="resume">
      <section class="profile">
        <!--{{AV.User.current()}} 和console.log(AV.User.current())显示的不一样-->
        <h1>
          <editable-span v-bind:value="resume.name" v-on:edit="onEdit('name', $event)"></editable-span>
        </h1>
        <p class="job">
          应聘职位: <editable-span v-bind:value="resume.jobTitle" v-on:edit="onEdit('jobTitle', $event)"></editable-span>
        </p>
        <p>
          <editable-span v-bind:value="resume.birthday" v-on:edit="onEdit('birthday', $event)"></editable-span> |
          <editable-span v-bind:value="resume.gender" v-on:edit="onEdit('gender', $event)"></editable-span> |
          <editable-span v-bind:value="resume.email" v-on:edit="onEdit('email', $event)"></editable-span> |
          <editable-span v-bind:value="resume.phone" v-on:edit="onEdit('phone', $event)"></editable-span>
        </p>
      </section>
      <section class="skills">
        <h2>技能</h2>
        <ul>
          <li v-for="skill,index in resume.skills">
            <editable-span class="name" v-bind:value="skill.name" v-on:edit="onEdit(`skills[${index}].name`, $event)"></editable-span>
            <div class="description">
              <editable-span v-bind:value="skill.description" v-on:edit="onEdit(`skills[${index}].description`, $event)"></editable-span>
            </div>
            <span v-if="index >= 1" @click="removeSkill(index)">删除</span>
          </li>
        </ul>
        <button v-on:click="addSkill">添加技能</button>
      </section>
      <section class="projects">
        <h2>项目经历</h2>
        <ol>
          <li v-for="project,index in resume.projects">
            <header class="clearfix">
              <h3 class="name">
                <editable-span v-bind:value="project.name" @edit="onEdit(`projects[${index}].name`, $event)"></editable-span>
              </h3>
              <editable-span class="link" :value="project.link" @edit="onEdit(`projects[${index}].link`, $event)"></editable-span>
              <editable-span class="keywords" :value="project.keywords" @edit="onEdit(`projects[${index}].keywords`, $event)">css3、jQuery、响应式</editable-span>
            </header>
            <p class="description">
              <editable-span v-bind:value="project.description" v-on:edit="onEdit(`projects[${index}].description`, $event)"></editable-span>
            </p>
            <span v-if="index>=1" @click="removeProject(index)">删除项目</span>
          </li>
        </ol>
        <button @click="addProject">添加项目</button>
      </section>
    </div>
  </main>
  <sign-in v-show="signInVisible" @close-sign-in="signInVisible=false" @to-sign-up="signInVisible=false;signUpVisible=true" @get-resume="getResume($event)"></sign-in>
  <sign-up  v-show="signUpVisible"@close-sign-up="signUpVisible=false" @to-sign-in="signInVisible=true;signUpVisible=false" @get-resume="getResume($event)"></sign-up>
  <share v-bind:share-link="shareLink" v-show="shareVisible" @close-share="shareVisible=false"></share>
  <skin-picker v-show="skinPickerVisible" @close-skin-picker="skinPickerVisible=false"></skin-picker>
</div>

<script src="../vendors/av-min.js"></script>
<script src="./js/initAv.js"></script>
<script src="../vendors/vue.min.js"></script>
<script src="./js/editable-span.js"></script>
<script src="./js/signIn.js"></script>
<script src="./js/signUp.js"></script>
<script src="./js/share.js"></script>
<script src="./js/skinPicker.js"></script>
<script src="./js/app.js"></script>
<!--组件需要在app之前引入-->
</body>
</html>