{"version":3,"sources":["js\\app.js"],"names":["window","App","template","data","isEdit","isLoginIn","isSharing","shareLink","resume","name","brief","contacts","iconClass","info","editName","skills","description","projects","link","keywords","resumeExample","promptVisible","prompt","icon","title","changeSkinVisible","created","search","location","href","regex","matches","match","getResume","getTheme","AV","User","current","origin","pathname","id","params","$route","message","showPrompt","logIn","email","password","then","loggedInUser","methods","addSkill","push","removeSkill","index","splice","addProject","removeProject","user","Query","get","newUser","Object","assign","attributes","catch","error","code","onSignOut","logOut","$emit","saveResume","createWithoutData","set","save","console","log","print","share","setTheme","value","saveTheme","theme","Vue","component"],"mappings":"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","file":"app.98bb41d0.map","sourceRoot":"..\\src","sourcesContent":["window.App = {\r\n  template: `\r\n      <div class=\"app\">\r\n        <app-header v-show=\"!isSharing\" v-bind:is-login-in=\"isLoginIn\" @login-out=\"onSignOut\" @on-edit=\"isEdit=true\" @on-save=\"saveResume\" @on-print=\"print\" @on-share=\"share\" @on-change-skin=\"changeSkinVisible=true\"></app-header>\r\n        <main>\r\n          <resume v-show=\"!isEdit\" v-bind:resume=\"resume\" @remove-skill=\"removeSkill($event)\"></resume>\r\n          <edit-resume v-show=\"isEdit\" v-bind:resume=\"resume\" @remove-skill=\"removeSkill($event)\" @add-skill=\"addSkill()\" @remove-project=\"removeProject($event)\" @add-project=\"addProject()\"></edit-resume>\r\n        </main>\r\n        <footer v-show=\"!isSharing\">\r\n          <p class=\"author\"><span>简历编辑器</span> by 海山城</p>\r\n          <p><a class=\"link\" href=\"https://haishancheng.github.io/vue-resume-2018/src/index.html#/\">github.com/haishancheng.</a> All Rights Reserved.</p>\r\n          <p>© CopyRight 2018-xxxx</p>\r\n        </footer>\r\n        <transition name=\"bounce\">\r\n          <prompt v-show=\"promptVisible\" v-bind:prompt=\"prompt\" @close-prompt=\"promptVisible = false\"></prompt>\r\n        </transition>\r\n        <transition name=\"bounce\">\r\n          <skin-picker v-show=\"changeSkinVisible\" @close-skin-picker=\"changeSkinVisible=false\" @set-theme=\"setTheme($event)\"></skin-picker>\r\n        </transition>\r\n      </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      isEdit: false,\r\n      isLoginIn: false,\r\n      isSharing: false,\r\n      shareLink: '',\r\n      resume: {\r\n        name: '你好',\r\n        brief: '欢迎使用简历编辑器，如果你想要制作你的简历，请点击右上角的【登录】',\r\n        contacts: [\r\n          {iconClass: 'icon-phone', info: '16666666666', editName: 'Phone'},\r\n          {iconClass: 'icon-email', info: 'example@example.com', editName: 'Email'},\r\n          {iconClass: 'icon-qq', info: '123456789', editName: 'QQ'},\r\n          {iconClass: 'icon-wechat', info: 'wechatID', editName: 'WeChat'},\r\n          {iconClass: 'icon-blog', info: ' http://example.blog.com/', editName: 'Blog'},\r\n          {iconClass: 'icon-github', info: 'https://github.com/example', editName: 'GitHub'},\r\n        ],\r\n        skills: [\r\n          {name: 'HTML', description: '熟练掌握HTML...'},\r\n          {name: 'CSS', description: '熟练掌握CSS...'},\r\n          {name: 'JavaScript', description: '熟练掌握JavaScript...'},\r\n        ],\r\n        projects: [\r\n          {name: 'HTML', link: 'http://example.com', keywords: 'HTML5', description: 'HTML作品'},\r\n          {name: 'CSS', link: 'http://example.com', keywords: 'CSS3', description: 'CSS作品'},\r\n          {name: 'JavaScript', link: 'http://example.com', keywords: 'ES6', description: 'JavaScript作品'},\r\n        ]\r\n      },\r\n      resumeExample: {\r\n        name: '你好',\r\n        brief: '欢迎使用简历编辑器，如果你想要制作你的简历，请点击右上角的【登录】',\r\n        contacts: [\r\n          {iconClass: 'icon-phone', info: '16666666666'},\r\n          {iconClass: 'icon-email', info: 'example@example.com'},\r\n          {iconClass: 'icon-qq', info: '123456789'},\r\n          {iconClass: 'icon-wechat', info: 'wechatID'},\r\n          {iconClass: 'icon-blog', info: ' http://example.blog.com/'},\r\n          {iconClass: 'icon-github', info: 'https://github.com/example'},\r\n        ],\r\n        skills: [\r\n          {name: 'HTML', description: '熟练掌握HTML...'},\r\n          {name: 'CSS', description: '熟练掌握CSS...'},\r\n          {name: 'JavaScript', description: '熟练掌握JavaScript...'},\r\n        ],\r\n        projects: [\r\n          {name: 'HTML', link: 'http://example.com', keywords: 'HTML5', description: 'HTML作品'},\r\n          {name: 'CSS', link: 'http://example.com', keywords: 'CSS3', description: 'CSS作品'},\r\n          {name: 'JavaScript', link: 'http://example.com', keywords: 'ES6', description: 'JavaScript作品'},\r\n        ]\r\n      },\r\n      promptVisible: false,\r\n      prompt: {\r\n        icon: '',\r\n        info: '',\r\n        title: ''\r\n      },\r\n      changeSkinVisible: false,\r\n    }\r\n  },\r\n  created: function () {\r\n    let search = location.href\r\n    let regex = /user_id=([^&#]+)/\r\n    let matches = search.match(regex)\r\n    if (matches) {\r\n      this.isSharing = true\r\n      this.getResume(matches[1])\r\n      this.getTheme(matches[1])\r\n    } else {\r\n      if (AV.User.current()) {\r\n        this.isLoginIn = true\r\n        this.shareLink = location.origin + location.pathname + '?user_id=' + AV.User.current().id\r\n        this.getResume(AV.User.current().id)\r\n        this.getTheme(AV.User.current().id)\r\n      }\r\n      let params = this.$route.params\r\n      if (params.message === \"signUpSuccess\") {\r\n        this.showPrompt('√', '注册成功，开始编辑你的简历吧！')\r\n        AV.User.logIn(params.email, params.password).then((loggedInUser) => {\r\n          this.isLoginIn = true\r\n          this.shareLink = location.origin + location.pathname + '?user_id=' + AV.User.current().id\r\n          this.getResume(loggedInUser.id)\r\n        })\r\n      }\r\n      if (params.message === \"signInSuccess\") {\r\n        AV.User.logIn(params.email, params.password).then((loggedInUser) => {\r\n          this.isLoginIn = true\r\n          this.shareLink = location.origin + location.pathname + '?user_id=' + AV.User.current().id\r\n          this.getResume(loggedInUser.id)\r\n        })\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    addSkill() {\r\n      this.resume.skills.push({name: '请填写技能名称', description: '请填写技能描述'})\r\n    },\r\n    removeSkill(index) {\r\n      this.resume.skills.splice(index, 1)\r\n    },\r\n    addProject() {\r\n      this.resume.projects.push({name: '请填写项目名称', link: 'http://...', keywords: '请填写关键词', description: '请填写项目描述'})\r\n    },\r\n    removeProject(index) {\r\n      this.resume.projects.splice(index, 1)\r\n    },\r\n    getResume(id) {\r\n      var user = new AV.Query('User')\r\n      return user.get(id).then((newUser) => {\r\n        Object.assign(this.resume, newUser.attributes.resume)\r\n      }).catch((error)=> {\r\n        if(error.code ===211){\r\n          this.showPrompt('✘', '分享链接不正确！')\r\n          // this.isSharing = false\r\n          // this.$router.replace({path: this.$route.path, query: {msg: 'error-sharing-link'}})\r\n        }\r\n      })\r\n    },\r\n    onSignOut() {\r\n      if (this.isEdit) {\r\n        this.showPrompt('!', '保存之后才可以注销哦~')\r\n      } else {\r\n        AV.User.logOut().then(() => {\r\n          this.isLoginIn = false\r\n          this.showPrompt('√', '注销成功！')\r\n          Object.assign(this.resume, this.resumeExample)\r\n          this.$emit('set-theme', 'default')\r\n        })\r\n      }\r\n    },\r\n    saveResume() {\r\n      let {id} = AV.User.current()\r\n      var user = AV.Object.createWithoutData('User', id)\r\n      user.set('resume', this.resume)\r\n      user.save().then(() => {\r\n        // this.showPrompt('√', '保存成功！')\r\n        this.isEdit = false\r\n      }, () => {\r\n        console.log('数据保存失败')\r\n      })\r\n    },\r\n    print() {\r\n      if (this.isEdit) {\r\n        this.showPrompt('!', '保存之后才能打印哦~')\r\n      } else {\r\n        window.print()\r\n      }\r\n    },\r\n    share() {\r\n      if (this.isEdit) {\r\n        this.showPrompt('!', '保存之后才能分享哦~')\r\n      } else {\r\n        this.showPrompt('√', this.shareLink, '请复制下列连接进行分享')\r\n      }\r\n    },\r\n    setTheme(value){\r\n      this.$emit('set-theme', value)\r\n      this.saveTheme(value)\r\n    },\r\n    saveTheme(theme){\r\n      let user = AV.Object.createWithoutData('User', AV.User.current().id)\r\n      user.set('theme', theme)\r\n      user.save()\r\n    },\r\n    getTheme(id){\r\n      let user = new AV.Query('User')\r\n      return user.get(id).then((newUser) => {\r\n        let {theme} = newUser.attributes\r\n        this.$emit('set-theme', theme)\r\n      })\r\n    },\r\n    showPrompt(icon, info, title) {\r\n      this.prompt.icon = icon\r\n      this.prompt.info = info\r\n      this.prompt.title = title\r\n      this.promptVisible = true\r\n    }\r\n  }\r\n}\r\n\r\n// 组件就是一个对象，上面就已经是组件了，这里是注册组件，注册完了才可以在html中使用，做路由的话其实暂时用不到\r\nVue.component('app', window.App)"]}